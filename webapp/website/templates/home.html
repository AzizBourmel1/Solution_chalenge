{% extends "base.html" %}
{% block content %}
{% if user.is_authenticated %}
<div class="container-fluid">
  <nav id="sidebarMenu" class="col-md-4 col-lg-3 d-md-block bg-light sidebar collapse">
    <div class="position-sticky pt-3">


      <div class="container mt-4 mb-4 p-3 d-flex justify-content-center"> 
        <div class="card cardprofile p-4"> 
          <div class=" image d-flex flex-column justify-content-center align-items-center">
            <button class="btn btn-secondary"> 
              <img src="{{userInfos[0].image}}" height="100" width="100" />
            </button> 
            <span class="mt-3"></span> 
            <span class="mt-3">Username : {{ userInfos[0].username }}</span>
            <span class="mt-3">Organization Name : {{ userInfos[0].organisation }}</span>
            <span class="mt-3">Phone Number : {{ userInfos[0].phone }}</span>
            <span class="mt-3">Adr : {{ userInfos[0].adr }}</span> 
          </div> 
        </div>
      </div>
    </div>
  </nav>
  <div class="containerall row">
    <p class="titledash ">Votre tableau du bord :</p>
    <div class="containerdashboard ">
      
      <div class="card carddash" >
        <div class="card-body">
          <h5 class="card-title mb-4 pb-3 pt-3 mt-4 text-muted">Publishers</h5>
                <h6 class="card-text mb-4 pb-2">Show all users</h6>
                <button class="btn btn-secondary mt-2">
            <a href="/users" class="card-link text-white">Show</a>

        </div>
      </div>
      <div class="card carddash" >
        <div class="card-body">
          <h5 class="card-title mb-4 pb-3 pt-3 mt-4 text-muted">Posts</h5>
                <h6 class="card-text mb-4 pb-2">Show all posts</h6>
                <button class="btn btn-secondary mt-2">
            <a href="/posts" class="card-link text-white">Show</a>
          </button>
        </div>
      </div>
    </div>    
  </div>

</div>
{% else %}
<section class="container mt-4">
  <h2 class="text-center fs-1">Login</h2>
  <form method="POST" action="/login">
    <div class="mb-3">
      <label for="exampleFormControlInput1" class="form-label">Username </label>
      <input
        type="text"
        class="form-control form-control-lg"
        id="user"
        placeholder="UserName"
        name="user"
        required
        minlength="4"
      />
    </div>

    <div class="mb-3">
      <label for="exampleFormControlInput1" class="form-label">Password </label>
      <input
        type="password"
        class="form-control form-control-lg"
        id="password"
        placeholder="Your Password"
        name="password"
        required
        minlength="4"
      />
    </div>
    <div class="d-grid">
      <button
        type="submit"
        class="btn btn-primary primary-btn btn-lg"
        id="login"
      >
        Login
      </button>
    </div>
    {% with messages = get_flashed_messages() %} {% if messages %}
    <div
      class="alert alert-danger alert-dismissible fade show mt-4"
      role="alert"
    >
      Invalide User Or Passowrd !
      <button
        type="button"
        class="btn-close"
        data-bs-dismiss="alert"
        aria-label="Close"
      ></button>
    </div>
    {% endif %} {% endwith %}
  </form>
</section>
{% endif %}
{% endblock content %}